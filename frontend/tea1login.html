<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ComunicAção - TEA comunicação</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            box-sizing: border-box;
            font-family: 'Nunito', sans-serif;
        }

        .theme-girl {
            --primary-color: #FFB6C1;
            --accent-color: #FF69B4;
            --bg-gradient-from: #FFB6C1;
            --bg-gradient-to: #FF69B4;
        }

        .theme-boy {
            --primary-color: #ADD8E6;
            --accent-color: #1E90FF;
            --bg-gradient-from: #ADD8E6;
            --bg-gradient-to: #1E90FF;
        }

        .header-bg {
            background-color: var(--primary-color);
        }

        .btn-primary {
            background-color: var(--accent-color);
        }

        .game-header {
            background: linear-gradient(90deg, var(--bg-gradient-from), var(--bg-gradient-to));
        }

        .profile-bg {
            background: linear-gradient(135deg, var(--bg-gradient-from), var(--bg-gradient-to));
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .comm-card.selected {
            border: 3px solid var(--accent-color);
            transform: scale(1.05);
        }

        .game-container {
            display: none;
        }

        .game-container.active {
            display: block;
        }

        .routine-item {
            border-left: 3px solid var(--accent-color);
            transition: all 0.3s ease;
        }

        .routine-item.completed {
            border-left: 3px solid #10B981;
            background-color: #F0FDF4;
        }

        .routine-item.current {
            border-left: 3px solid #3B82F6;
            background-color: #EFF6FF;
        }

        .routine-item:hover {
            transform: translateX(5px);
        }

        .memory-card {
            perspective: 1000px;
            transform-style: preserve-3d;
            transition: transform 0.5s;
            cursor: pointer;
        }

        .memory-card.flipped {
            transform: rotateY(180deg);
        }

        .memory-card-front,
        .memory-card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .memory-card-back {
            transform: rotateY(180deg);
        }

        .sequence-item.highlight {
            opacity: 0.6;
            transform: scale(0.95);
        }

        .drawing-canvas {
            cursor: crosshair;
            touch-action: none;
        }

        .color-swatch {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            transition: transform 0.2s;
            border: 2px solid #fff;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .color-swatch:hover {
            transform: scale(1.1);
        }

        .color-swatch.active {
            border: 3px solid #000;
            transform: scale(1.1);
        }

        .brush-size {
            border-radius: 50%;
            background-color: #000;
            cursor: pointer;
            transition: transform 0.2s;
            border: 2px solid #fff;
        }

        .brush-size:hover {
            transform: scale(1.1);
        }

        .brush-size.active {
            border: 2px solid var(--accent-color);
            transform: scale(1.1);
        }

        @media (max-width: 640px) {
            .mobile-portrait-adjust {
                grid-template-columns: repeat(2, 1fr) !important;
            }
        }
    </style>


    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>

<body class="theme-girl bg-gray-50">
    <!-- Header -->
    <header class="header-bg text-white shadow-md">
        <div class="container mx-auto px-4 py-3">
            <!-- Botão de Crise no topo -->
            <div class="flex justify-end mb-2">
                <button id="emergency-button"
                    class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg shadow-lg flex items-center text-sm">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                    </svg>
                    Estou em crise
                </button>
            </div>

            <div class="flex flex-col md:flex-row items-center justify-between">
                <div class="flex items-center mb-3 md:mb-0">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 mr-2" viewBox="0 0 20 20"
                        fill="currentColor">
                        <path fill-rule="evenodd"
                            d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z"
                            clip-rule="evenodd" />
                    </svg>
                    <div>
                        <h1 class="text-xl font-bold">ComunicAção</h1>
                        <p class="text-sm">TEA comunicação</p>
                    </div>
                </div>
                <nav>
                    <ul class="flex flex-wrap space-x-2">
                        <li><button class="tab-button px-3 py-1 rounded-lg bg-white bg-opacity-20"
                                data-tab="comunicacao">Comunicação</button></li>
                        <li><button class="tab-button px-3 py-1 rounded-lg hover:bg-white hover:bg-opacity-20"
                                data-tab="rotina">Rotina</button></li>
                        <li><button class="tab-button px-3 py-1 rounded-lg hover:bg-white hover:bg-opacity-20"
                                data-tab="jogos">Jogos</button></li>
                        <li><button class="tab-button px-3 py-1 rounded-lg hover:bg-white hover:bg-opacity-20"
                                data-tab="perfil">Perfil</button></li>
                        <li><button class="tab-button px-3 py-1 rounded-lg hover:bg-white hover:bg-opacity-20"
                                data-tab="login">Login</button></li>
                        <li><button class="tab-button px-3 py-1 rounded-lg hover:bg-white hover:bg-opacity-20"
                                data-tab="sobre">Sobre Nós</button></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <!-- Theme Selector -->
    <div class="bg-white py-2 shadow-sm">
        <div class="container mx-auto px-4 flex flex-wrap justify-between items-center">
            <div class="flex items-center space-x-4 mb-2 sm:mb-0">
                <span class="text-sm font-medium">Tema:</span>
                <button id="theme-girl" class="px-3 py-1 bg-pink-200 text-pink-800 rounded-full text-sm">Menina</button>
                <button id="theme-boy" class="px-3 py-1 bg-blue-200 text-blue-800 rounded-full text-sm">Menino</button>
            </div>
            <div class="flex flex-wrap items-center space-x-4">
                <div class="flex items-center mb-2 sm:mb-0">
                    <span class="text-sm font-medium mr-2">Tamanho:</span>
                    <button id="font-decrease" class="px-2 py-1 bg-gray-200 rounded-l-md">A-</button>
                    <button id="font-reset" class="px-2 py-1 bg-gray-200">A</button>
                    <button id="font-increase" class="px-2 py-1 bg-gray-200 rounded-r-md">A+</button>
                </div>
                <div class="flex items-center">
                    <span class="text-sm font-medium mr-2">Velocidade:</span>
                    <input type="range" id="speech-rate" min="0.5" max="2" step="0.1" value="1" class="w-24">
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-6 font-size-control">
        <!-- Comunicação Tab -->
        <div id="comunicacao" class="tab-content active">
            <div class="mb-6">
                <h2 class="text-2xl font-bold mb-3">Como você está se sentindo?</h2>
                <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-6 gap-3 mobile-portrait-adjust">
                    <div class="comm-card emotion-card bg-white rounded-lg shadow-sm p-3 flex flex-col items-center cursor-pointer transition-all"
                        data-text="Eu estou feliz">
                        <div class="text-4xl mb-1">😊</div>
                        <span class="font-medium text-gray-700">Feliz</span>
                    </div>
                    <div class="comm-card emotion-card bg-white rounded-lg shadow-sm p-3 flex flex-col items-center cursor-pointer transition-all"
                        data-text="Eu estou triste">
                        <div class="text-4xl mb-1">😢</div>
                        <span class="font-medium text-gray-700">Triste</span>
                    </div>
                    <div class="comm-card emotion-card bg-white rounded-lg shadow-sm p-3 flex flex-col items-center cursor-pointer transition-all"
                        data-text="Eu estou bravo">
                        <div class="text-4xl mb-1">😡</div>
                        <span class="font-medium text-gray-700">Bravo</span>
                    </div>
                    <div class="comm-card emotion-card bg-white rounded-lg shadow-sm p-3 flex flex-col items-center cursor-pointer transition-all"
                        data-text="Eu estou cansado">
                        <div class="text-4xl mb-1">😴</div>
                        <span class="font-medium text-gray-700">Cansado</span>
                    </div>
                    <div class="comm-card emotion-card bg-white rounded-lg shadow-sm p-3 flex flex-col items-center cursor-pointer transition-all"
                        data-text="Eu estou doente">
                        <div class="text-4xl mb-1">🤒</div>
                        <span class="font-medium text-gray-700">Doente</span>
                    </div>
                    <div class="comm-card emotion-card bg-white rounded-lg shadow-sm p-3 flex flex-col items-center cursor-pointer transition-all"
                        data-text="Eu estou confuso">
                        <div class="text-4xl mb-1">😕</div>
                        <span class="font-medium text-gray-700">Confuso</span>
                    </div>
                </div>
            </div>

            <div class="mb-6">
                <h2 class="text-2xl font-bold mb-3">Necessidades</h2>
                <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 mobile-portrait-adjust">
                    <div class="comm-card need-card bg-white rounded-lg shadow-sm p-3 flex flex-col items-center cursor-pointer transition-all"
                        data-text="Eu quero água">
                        <div class="bg-blue-100 rounded-full p-3 mb-2 flex items-center justify-center">
                            <span class="text-4xl">💧</span>
                        </div>
                        <span class="font-medium text-gray-700">Água</span>
                    </div>
                    <div class="comm-card need-card bg-white rounded-lg shadow-sm p-3 flex flex-col items-center cursor-pointer transition-all"
                        data-text="Eu quero comida">
                        <div class="bg-red-100 rounded-full p-3 mb-2 flex items-center justify-center">
                            <span class="text-4xl">🍽️</span>
                        </div>
                        <span class="font-medium text-gray-700">Comida</span>
                    </div>
                    <div class="comm-card need-card bg-white rounded-lg shadow-sm p-3 flex flex-col items-center cursor-pointer transition-all"
                        data-text="Eu quero ir ao banheiro">
                        <div class="bg-green-100 rounded-full p-3 mb-2 flex items-center justify-center">
                            <span class="text-4xl">🚽</span>
                        </div>
                        <span class="font-medium text-gray-700">Banheiro</span>
                    </div>
                    <div class="comm-card need-card bg-white rounded-lg shadow-sm p-3 flex flex-col items-center cursor-pointer transition-all"
                        data-text="Eu quero descansar">
                        <div class="bg-yellow-100 rounded-full p-3 mb-2 flex items-center justify-center">
                            <span class="text-4xl">🛌</span>
                        </div>
                        <span class="font-medium text-gray-700">Descansar</span>
                    </div>
                    <div class="comm-card need-card bg-white rounded-lg shadow-sm p-3 flex flex-col items-center cursor-pointer transition-all"
                        data-text="Eu preciso de ajuda">
                        <div class="bg-purple-100 rounded-full p-3 mb-2 flex items-center justify-center">
                            <span class="text-4xl">🆘</span>
                        </div>
                        <span class="font-medium text-gray-700">Ajuda</span>
                    </div>
                    <div class="comm-card need-card bg-white rounded-lg shadow-sm p-3 flex flex-col items-center cursor-pointer transition-all"
                        data-text="Eu quero carinho">
                        <div class="bg-pink-100 rounded-full p-3 mb-2 flex items-center justify-center">
                            <span class="text-4xl">❤️</span>
                        </div>
                        <span class="font-medium text-gray-700">Carinho</span>
                    </div>
                    <div class="comm-card need-card bg-white rounded-lg shadow-sm p-3 flex flex-col items-center cursor-pointer transition-all"
                        data-text="Eu preciso de remédio">
                        <div class="bg-blue-100 rounded-full p-3 mb-2 flex items-center justify-center">
                            <span class="text-4xl">💊</span>
                        </div>
                        <span class="font-medium text-gray-700">Remédio</span>
                    </div>
                    <div class="comm-card need-card bg-white rounded-lg shadow-sm p-3 flex flex-col items-center cursor-pointer transition-all"
                        data-text="Eu quero dormir">
                        <div class="bg-indigo-100 rounded-full p-3 mb-2 flex items-center justify-center">
                            <span class="text-4xl">😴</span>
                        </div>
                        <span class="font-medium text-gray-700">Dormir</span>
                    </div>
                </div>
            </div>

            <div class="mb-6">
                <h2 class="text-2xl font-bold mb-3">Atividades</h2>
                <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 mobile-portrait-adjust">
                    <div class="comm-card activity-card bg-white rounded-lg shadow-sm p-3 flex flex-col items-center cursor-pointer transition-all"
                        data-text="Eu quero brincar">
                        <div class="bg-green-100 rounded-full p-3 mb-2 flex items-center justify-center">
                            <span class="text-4xl">🧸</span>
                        </div>
                        <span class="font-medium text-gray-700">Brincar</span>
                    </div>
                    <div class="comm-card activity-card bg-white rounded-lg shadow-sm p-3 flex flex-col items-center cursor-pointer transition-all"
                        data-text="Eu quero desenhar">
                        <div class="bg-yellow-100 rounded-full p-3 mb-2 flex items-center justify-center">
                            <span class="text-4xl">🖌️</span>
                        </div>
                        <span class="font-medium text-gray-700">Desenhar</span>
                    </div>
                    <div class="comm-card activity-card bg-white rounded-lg shadow-sm p-3 flex flex-col items-center cursor-pointer transition-all"
                        data-text="Eu quero assistir TV">
                        <div class="bg-blue-100 rounded-full p-3 mb-2 flex items-center justify-center">
                            <span class="text-4xl">📺</span>
                        </div>
                        <span class="font-medium text-gray-700">Assistir TV</span>
                    </div>
                    <div class="comm-card activity-card bg-white rounded-lg shadow-sm p-3 flex flex-col items-center cursor-pointer transition-all"
                        data-text="Eu quero ouvir música">
                        <div class="bg-purple-100 rounded-full p-3 mb-2 flex items-center justify-center">
                            <span class="text-4xl">🎵</span>
                        </div>
                        <span class="font-medium text-gray-700">Música</span>
                    </div>
                    <div class="comm-card activity-card bg-white rounded-lg shadow-sm p-3 flex flex-col items-center cursor-pointer transition-all"
                        data-text="Eu quero ler">
                        <div class="bg-red-100 rounded-full p-3 mb-2 flex items-center justify-center">
                            <span class="text-4xl">📚</span>
                        </div>
                        <span class="font-medium text-gray-700">Ler</span>
                    </div>
                    <div class="comm-card activity-card bg-white rounded-lg shadow-sm p-3 flex flex-col items-center cursor-pointer transition-all"
                        data-text="Eu quero passear">
                        <div class="bg-green-100 rounded-full p-3 mb-2 flex items-center justify-center">
                            <span class="text-4xl">🚶</span>
                        </div>
                        <span class="font-medium text-gray-700">Passear</span>
                    </div>
                    <div class="comm-card activity-card bg-white rounded-lg shadow-sm p-3 flex flex-col items-center cursor-pointer transition-all"
                        data-text="Eu quero jogar">
                        <div class="bg-indigo-100 rounded-full p-3 mb-2 flex items-center justify-center">
                            <span class="text-4xl">🎮</span>
                        </div>
                        <span class="font-medium text-gray-700">Jogar</span>
                    </div>
                    <div class="comm-card activity-card bg-white rounded-lg shadow-sm p-3 flex flex-col items-center cursor-pointer transition-all"
                        data-text="Eu quero estudar">
                        <div class="bg-amber-100 rounded-full p-3 mb-2 flex items-center justify-center">
                            <span class="text-4xl">✏️</span>
                        </div>
                        <span class="font-medium text-gray-700">Estudar</span>
                    </div>
                </div>
            </div>

            <div class="mb-6">
                <h2 class="text-2xl font-bold mb-3">Família</h2>
                <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 mobile-portrait-adjust">
                    <div class="comm-card family-card bg-white rounded-lg shadow-sm p-3 flex flex-col items-center cursor-pointer transition-all"
                        data-text="Eu quero a mamãe">
                        <div class="bg-pink-100 rounded-full p-3 mb-2 flex items-center justify-center">
                            <span class="text-4xl">👩</span>
                        </div>
                        <span class="font-medium text-gray-700">Mamãe</span>
                    </div>
                    <div class="comm-card family-card bg-white rounded-lg shadow-sm p-3 flex flex-col items-center cursor-pointer transition-all"
                        data-text="Eu quero o papai">
                        <div class="bg-blue-100 rounded-full p-3 mb-2 flex items-center justify-center">
                            <span class="text-4xl">👨</span>
                        </div>
                        <span class="font-medium text-gray-700">Papai</span>
                    </div>
                    <div class="comm-card family-card bg-white rounded-lg shadow-sm p-3 flex flex-col items-center cursor-pointer transition-all"
                        data-text="Eu quero o vovô">
                        <div class="bg-yellow-100 rounded-full p-3 mb-2 flex items-center justify-center">
                            <span class="text-4xl">👴</span>
                        </div>
                        <span class="font-medium text-gray-700">Vovô</span>
                    </div>
                    <div class="comm-card family-card bg-white rounded-lg shadow-sm p-3 flex flex-col items-center cursor-pointer transition-all"
                        data-text="Eu quero a vovó">
                        <div class="bg-purple-100 rounded-full p-3 mb-2 flex items-center justify-center">
                            <span class="text-4xl">👵</span>
                        </div>
                        <span class="font-medium text-gray-700">Vovó</span>
                    </div>
                    <div class="comm-card family-card bg-white rounded-lg shadow-sm p-3 flex flex-col items-center cursor-pointer transition-all"
                        data-text="Eu quero meu irmão">
                        <div class="bg-green-100 rounded-full p-3 mb-2 flex items-center justify-center">
                            <span class="text-4xl">👦</span>
                        </div>
                        <span class="font-medium text-gray-700">Irmão</span>
                    </div>
                    <div class="comm-card family-card bg-white rounded-lg shadow-sm p-3 flex flex-col items-center cursor-pointer transition-all"
                        data-text="Eu quero minha irmã">
                        <div class="bg-red-100 rounded-full p-3 mb-2 flex items-center justify-center">
                            <span class="text-4xl">👧</span>
                        </div>
                        <span class="font-medium text-gray-700">Irmã</span>
                    </div>
                    <div class="comm-card family-card bg-white rounded-lg shadow-sm p-3 flex flex-col items-center cursor-pointer transition-all"
                        data-text="Eu quero meu tio">
                        <div class="bg-indigo-100 rounded-full p-3 mb-2 flex items-center justify-center">
                            <span class="text-4xl">👨‍🦱</span>
                        </div>
                        <span class="font-medium text-gray-700">Tio</span>
                    </div>
                    <div class="comm-card family-card bg-white rounded-lg shadow-sm p-3 flex flex-col items-center cursor-pointer transition-all"
                        data-text="Eu quero minha tia">
                        <div class="bg-orange-100 rounded-full p-3 mb-2 flex items-center justify-center">
                            <span class="text-4xl">👩‍🦰</span>
                        </div>
                        <span class="font-medium text-gray-700">Tia</span>
                    </div>
                </div>
            </div>

            <div class="mb-6">
                <h2 class="text-2xl font-bold mb-3">Lugares</h2>
                <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 mobile-portrait-adjust">
                    <div class="comm-card place-card bg-white rounded-lg shadow-sm p-3 flex flex-col items-center cursor-pointer transition-all"
                        data-text="Eu quero ir para casa">
                        <div class="bg-blue-100 rounded-full p-3 mb-2 flex items-center justify-center">
                            <span class="text-4xl">🏠</span>
                        </div>
                        <span class="font-medium text-gray-700">Casa</span>
                    </div>
                    <div class="comm-card place-card bg-white rounded-lg shadow-sm p-3 flex flex-col items-center cursor-pointer transition-all"
                        data-text="Eu quero ir à escola">
                        <div class="bg-yellow-100 rounded-full p-3 mb-2 flex items-center justify-center">
                            <span class="text-4xl">🏫</span>
                        </div>
                        <span class="font-medium text-gray-700">Escola</span>
                    </div>
                    <div class="comm-card place-card bg-white rounded-lg shadow-sm p-3 flex flex-col items-center cursor-pointer transition-all"
                        data-text="Eu quero ir ao parque">
                        <div class="bg-green-100 rounded-full p-3 mb-2 flex items-center justify-center">
                            <span class="text-4xl">🌳</span>
                        </div>
                        <span class="font-medium text-gray-700">Parque</span>
                    </div>
                    <div class="comm-card place-card bg-white rounded-lg shadow-sm p-3 flex flex-col items-center cursor-pointer transition-all"
                        data-text="Eu quero ir ao hospital">
                        <div class="bg-red-100 rounded-full p-3 mb-2 flex items-center justify-center">
                            <span class="text-4xl">🏥</span>
                        </div>
                        <span class="font-medium text-gray-700">Hospital</span>
                    </div>
                    <div class="comm-card place-card bg-white rounded-lg shadow-sm p-3 flex flex-col items-center cursor-pointer transition-all"
                        data-text="Eu quero ir ao supermercado">
                        <div class="bg-purple-100 rounded-full p-3 mb-2 flex items-center justify-center">
                            <span class="text-4xl">🛒</span>
                        </div>
                        <span class="font-medium text-gray-700">Mercado</span>
                    </div>
                    <div class="comm-card place-card bg-white rounded-lg shadow-sm p-3 flex flex-col items-center cursor-pointer transition-all"
                        data-text="Eu quero ir à praia">
                        <div class="bg-cyan-100 rounded-full p-3 mb-2 flex items-center justify-center">
                            <span class="text-4xl">🏖️</span>
                        </div>
                        <span class="font-medium text-gray-700">Praia</span>
                    </div>
                    <div class="comm-card place-card bg-white rounded-lg shadow-sm p-3 flex flex-col items-center cursor-pointer transition-all"
                        data-text="Eu quero ir ao shopping">
                        <div class="bg-pink-100 rounded-full p-3 mb-2 flex items-center justify-center">
                            <span class="text-4xl">🏬</span>
                        </div>
                        <span class="font-medium text-gray-700">Shopping</span>
                    </div>
                    <div class="comm-card place-card bg-white rounded-lg shadow-sm p-3 flex flex-col items-center cursor-pointer transition-all"
                        data-text="Eu quero ir ao médico">
                        <div class="bg-teal-100 rounded-full p-3 mb-2 flex items-center justify-center">
                            <span class="text-4xl">👨‍⚕️</span>
                        </div>
                        <span class="font-medium text-gray-700">Médico</span>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-lg shadow-sm p-4">
                <h2 class="text-xl font-bold mb-3">Minha Frase</h2>
                <div id="sentence-display"
                    class="bg-blue-50 rounded-lg p-3 min-h-[80px] mb-3 flex items-center justify-center">
                    <p class="text-gray-500">Selecione cartões para formar sua frase ou clique duas vezes para falar
                        imediatamente...</p>
                </div>
                <div class="flex justify-between">
                    <button id="clear-button"
                        class="bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg flex items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" viewBox="0 0 20 20"
                            fill="currentColor">
                            <path fill-rule="evenodd"
                                d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z"
                                clip-rule="evenodd" />
                        </svg>
                        Limpar
                    </button>
                    <button id="speak-button"
                        class="btn-primary text-white font-bold py-2 px-4 rounded-lg flex items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" viewBox="0 0 20 20"
                            fill="currentColor">
                            <path fill-rule="evenodd"
                                d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071a1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243a1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828a1 1 0 010-1.415z"
                                clip-rule="evenodd" />
                        </svg>
                        Falar
                    </button>
                </div>
            </div>
        </div>

        <!-- Rotina Tab -->
        <div id="rotina" class="tab-content">
            <h2 class="text-2xl font-bold mb-4">Minha Rotina</h2>

            <div class="bg-white rounded-lg shadow-sm overflow-hidden">
                <div class="game-header p-4 text-white">
                    <div class="flex justify-between items-center">
                        <h3 class="text-xl font-bold">📅 Atividades do Dia</h3>
                        <div class="flex items-center space-x-2">
                            <button id="edit-routine" class="bg-white bg-opacity-20 px-3 py-1 rounded text-sm">
                                ✏️ Editar
                            </button>
                            <button id="prev-day" class="bg-white bg-opacity-20 px-3 py-1 rounded text-sm">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20"
                                    fill="currentColor">
                                    <path fill-rule="evenodd"
                                        d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z"
                                        clip-rule="evenodd" />
                                </svg>
                            </button>
                            <span id="current-day" class="font-medium">Segunda-feira</span>
                            <button id="next-day" class="bg-white bg-opacity-20 px-3 py-1 rounded text-sm">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20"
                                    fill="currentColor">
                                    <path fill-rule="evenodd"
                                        d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z"
                                        clip-rule="evenodd" />
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>

                <div class="p-4">
                    <div class="flex justify-between items-center mb-4">
                        <div class="text-lg font-bold">Progresso do dia:</div>
                        <div class="text-sm font-medium text-gray-600"><span id="completed-count">0</span> de <span
                                id="total-count">8</span> atividades concluídas</div>
                    </div>

                    <div class="w-full bg-gray-200 rounded-full h-2.5 mb-6">
                        <div id="progress-bar" class="bg-green-500 h-2.5 rounded-full transition-all duration-500"
                            style="width: 0%"></div>
                    </div>

                    <div id="routine-items" class="space-y-3">
                        <!-- Rotina será carregada aqui -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Jogos Tab -->
        <div id="jogos" class="tab-content">
            <h2 class="text-2xl font-bold mb-4">Escolha seu Jogo</h2>

            <!-- Game Selection Grid -->
            <div id="game-selection" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-6">
                <div class="game-card bg-white rounded-lg shadow-sm overflow-hidden cursor-pointer hover:shadow-lg transition-shadow"
                    data-game="drawing">
                    <div class="game-header h-24 flex items-center justify-center text-white">
                        <div class="text-center">
                            <div class="text-3xl mb-1">🎨</div>
                            <h3 class="text-lg font-bold">Desenho</h3>
                        </div>
                    </div>
                    <div class="p-4">
                        <p class="text-gray-600 text-sm">Desenhe e pinte o que quiser!</p>
                    </div>
                </div>

                <div class="game-card bg-white rounded-lg shadow-sm overflow-hidden cursor-pointer hover:shadow-lg transition-shadow"
                    data-game="memory">
                    <div class="game-header h-24 flex items-center justify-center text-white">
                        <div class="text-center">
                            <div class="text-3xl mb-1">🧠</div>
                            <h3 class="text-lg font-bold">Jogo da Memória</h3>
                        </div>
                    </div>
                    <div class="p-4">
                        <p class="text-gray-600 text-sm">Encontre os pares de emojis!</p>
                    </div>
                </div>

                <div class="game-card bg-white rounded-lg shadow-sm overflow-hidden cursor-pointer hover:shadow-lg transition-shadow"
                    data-game="alphabet">
                    <div class="game-header h-24 flex items-center justify-center text-white">
                        <div class="text-center">
                            <div class="text-3xl mb-1">🔤</div>
                            <h3 class="text-lg font-bold">Alfabeto</h3>
                        </div>
                    </div>
                    <div class="p-4">
                        <p class="text-gray-600 text-sm">Associe palavras com letras!</p>
                    </div>
                </div>

                <div class="game-card bg-white rounded-lg shadow-sm overflow-hidden cursor-pointer hover:shadow-lg transition-shadow"
                    data-game="sequence">
                    <div class="game-header h-24 flex items-center justify-center text-white">
                        <div class="text-center">
                            <div class="text-3xl mb-1">🌈</div>
                            <h3 class="text-lg font-bold">Sequência de Cores</h3>
                        </div>
                    </div>
                    <div class="p-4">
                        <p class="text-gray-600 text-sm">Memorize a sequência de cores!</p>
                    </div>
                </div>
            </div>

            <!-- Game Containers -->
            <!-- Jogo de Desenho -->
            <div id="drawing-game" class="game-container">
                <div class="bg-white rounded-lg shadow-sm overflow-hidden">
                    <div class="game-header h-16 flex items-center justify-between px-4 text-white">
                        <h3 class="text-xl font-bold">🎨 Desenho e Pintura</h3>
                        <button class="back-to-games bg-white bg-opacity-20 px-3 py-1 rounded text-sm">← Voltar</button>
                    </div>
                    <div class="p-4">
                        <div class="flex flex-wrap justify-between items-center mb-4">
                            <div class="flex items-center space-x-2 mb-2 sm:mb-0">
                                <span class="text-sm font-medium">Cores:</span>
                                <div class="color-swatch active" style="background-color: #000000;"
                                    data-color="#000000"></div>
                                <div class="color-swatch" style="background-color: #FF0000;" data-color="#FF0000"></div>
                                <div class="color-swatch" style="background-color: #00FF00;" data-color="#00FF00"></div>
                                <div class="color-swatch" style="background-color: #0000FF;" data-color="#0000FF"></div>
                                <div class="color-swatch" style="background-color: #FFFF00;" data-color="#FFFF00"></div>
                                <div class="color-swatch" style="background-color: #FF00FF;" data-color="#FF00FF"></div>
                                <div class="color-swatch" style="background-color: #FFA500;" data-color="#FFA500"></div>
                                <div class="color-swatch" style="background-color: #800080;" data-color="#800080"></div>
                            </div>
                            <div class="flex items-center space-x-2 mb-2 sm:mb-0">
                                <span class="text-sm font-medium">Tamanho:</span>
                                <div class="brush-size active" style="width: 15px; height: 15px;" data-size="5"></div>
                                <div class="brush-size" style="width: 20px; height: 20px;" data-size="10"></div>
                                <div class="brush-size" style="width: 25px; height: 25px;" data-size="15"></div>
                                <div class="brush-size" style="width: 30px; height: 30px;" data-size="20"></div>
                            </div>
                            <div class="flex space-x-2">
                                <button id="clear-drawing"
                                    class="bg-gray-200 hover:bg-gray-300 text-gray-700 font-bold py-1 px-3 rounded-lg text-sm">
                                    Limpar
                                </button>
                            </div>
                        </div>
                        <div class="border border-gray-300 rounded-lg overflow-hidden">
                            <canvas id="drawing-canvas" class="drawing-canvas bg-white w-full" height="400"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Jogo da Memória -->
            <div id="memory-game" class="game-container">
                <div class="bg-white rounded-lg shadow-sm overflow-hidden">
                    <div class="game-header h-16 flex items-center justify-between px-4 text-white">
                        <h3 class="text-xl font-bold">🧠 Jogo da Memória</h3>
                        <button class="back-to-games bg-white bg-opacity-20 px-3 py-1 rounded text-sm">← Voltar</button>
                    </div>
                    <div class="p-4">
                        <div class="flex justify-between items-center mb-4">
                            <div class="text-lg font-bold">Pontos: <span id="memory-score">0</span></div>
                            <button id="reset-memory"
                                class="btn-primary text-white font-bold py-1 px-3 rounded-lg text-sm">
                                Novo Jogo
                            </button>
                        </div>
                        <div class="grid grid-cols-4 gap-2 mb-4" id="memory-board">
                            <!-- Memory cards will be generated here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Alfabeto -->
            <div id="alphabet-game" class="game-container">
                <div class="bg-white rounded-lg shadow-sm overflow-hidden">
                    <div class="game-header h-16 flex items-center justify-between px-4 text-white">
                        <h3 class="text-xl font-bold">🔤 Alfabeto Divertido</h3>
                        <button class="back-to-games bg-white bg-opacity-20 px-3 py-1 rounded text-sm">← Voltar</button>
                    </div>
                    <div class="p-4">
                        <div class="flex justify-between items-center mb-4">
                            <div class="text-lg font-bold">Letra: <span id="current-letter">A</span></div>
                            <div class="text-lg font-bold">Pontuação: <span id="alphabet-score">0</span></div>
                        </div>

                        <div class="flex flex-col items-center mb-4">
                            <div
                                class="mb-3 bg-blue-100 rounded-lg p-4 w-24 h-24 flex items-center justify-center shadow-lg">
                                <span id="big-letter" class="text-6xl font-bold text-blue-600">A</span>
                            </div>

                            <div class="mb-3 flex flex-col items-center">
                                <p class="text-xl mb-2"><span id="letter-word">Abelha</span></p>
                                <div class="bg-yellow-100 rounded-lg p-3 w-24 h-24 flex items-center justify-center">
                                    <span class="text-5xl" id="letter-emoji">🐝</span>
                                </div>
                            </div>

                            <div class="flex justify-between w-full mt-2">
                                <button id="prev-letter"
                                    class="bg-gray-200 hover:bg-gray-300 text-gray-700 font-bold py-2 px-3 rounded-lg flex items-center text-sm">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" viewBox="0 0 20 20"
                                        fill="currentColor">
                                        <path fill-rule="evenodd"
                                            d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z"
                                            clip-rule="evenodd" />
                                    </svg>
                                    Anterior
                                </button>
                                <button id="speak-letter"
                                    class="btn-primary text-white font-bold py-2 px-3 rounded-lg flex items-center text-sm">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" viewBox="0 0 20 20"
                                        fill="currentColor">
                                        <path fill-rule="evenodd"
                                            d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217z"
                                            clip-rule="evenodd" />
                                    </svg>
                                    Ouvir
                                </button>
                                <button id="next-letter"
                                    class="btn-primary text-white font-bold py-2 px-3 rounded-lg flex items-center text-sm">
                                    Próxima
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-1" viewBox="0 0 20 20"
                                        fill="currentColor">
                                        <path fill-rule="evenodd"
                                            d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z"
                                            clip-rule="evenodd" />
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sequência de Cores -->
            <div id="sequence-game" class="game-container">
                <div class="bg-white rounded-lg shadow-sm overflow-hidden">
                    <div class="game-header h-16 flex items-center justify-between px-4 text-white">
                        <h3 class="text-xl font-bold">🌈 Sequência de Cores</h3>
                        <button class="back-to-games bg-white bg-opacity-20 px-3 py-1 rounded text-sm">← Voltar</button>
                    </div>
                    <div class="p-4">
                        <div class="flex justify-between items-center mb-4">
                            <div class="text-lg font-bold">Nível: <span id="sequence-level">1</span></div>
                            <div class="text-lg font-bold">Pontuação: <span id="sequence-score">0</span></div>
                        </div>
                        <div class="grid grid-cols-2 gap-4 mb-4" id="sequence-board">
                            <div class="sequence-item bg-red-500 h-24 rounded-lg cursor-pointer shadow-lg transform transition-transform hover:scale-95 active:scale-90 flex items-center justify-center text-white font-bold text-lg"
                                data-color="red" data-name="vermelho">VERMELHO</div>
                            <div class="sequence-item bg-blue-500 h-24 rounded-lg cursor-pointer shadow-lg transform transition-transform hover:scale-95 active:scale-90 flex items-center justify-center text-white font-bold text-lg"
                                data-color="blue" data-name="azul">AZUL</div>
                            <div class="sequence-item bg-green-500 h-24 rounded-lg cursor-pointer shadow-lg transform transition-transform hover:scale-95 active:scale-90 flex items-center justify-center text-white font-bold text-lg"
                                data-color="green" data-name="verde">VERDE</div>
                            <div class="sequence-item bg-yellow-500 h-24 rounded-lg cursor-pointer shadow-lg transform transition-transform hover:scale-95 active:scale-90 flex items-center justify-center text-black font-bold text-lg"
                                data-color="yellow" data-name="amarelo">AMARELO</div>
                        </div>
                        <div class="text-center">
                            <button id="start-sequence" class="btn-primary text-white font-bold py-2 px-4 rounded-lg">
                                Iniciar Jogo
                            </button>
                            <div id="sequence-message" class="mt-2 text-lg font-medium text-gray-600"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Perfil Tab -->
        <div id="perfil" class="tab-content">
            <h2 class="text-2xl font-bold mb-4">Perfil da Criança</h2>

            <div class="bg-white rounded-lg shadow-sm overflow-hidden mb-6">
                <div class="md:flex">
                    <div class="md:w-1/3 p-6 flex flex-col items-center justify-center profile-bg text-white">
                        <div
                            class="w-24 h-24 rounded-full bg-white flex items-center justify-center mb-4 border-4 border-white shadow">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 text-pink-500" fill="none"
                                viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                            </svg>
                        </div>
                        <h3 class="text-xl font-bold mb-2" id="profile-name">Visitante</h3>
                        <p class="text-blue-100 mb-3">Nível <span id="user-level">1</span></p>
                        <div class="w-full bg-blue-200 rounded-full h-3 mb-2">
                            <div id="level-progress-bar" class="bg-white h-3 rounded-full transition-all duration-500"
                                style="width: 0%"></div>
                        </div>
                        <p class="text-blue-100 text-sm"><span id="points-to-next">100</span> pontos para o próximo
                            nível</p>
                    </div>
                    <div class="md:w-2/3 p-6">
                        <h3 class="text-lg font-bold text-gray-800 mb-4">Estatísticas dos Jogos</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="bg-gradient-to-r from-pink-100 to-pink-200 rounded-lg p-4">
                                <div class="flex items-center justify-between mb-2">
                                    <h4 class="font-bold text-pink-800">🎨 Desenho</h4>
                                    <span class="text-2xl">🎨</span>
                                </div>
                                <div class="text-sm text-pink-700">
                                    <p>Desenhos criados: <span id="drawing-count" class="font-bold">0</span></p>
                                    <p>Tempo total: <span id="drawing-time" class="font-bold">0min</span></p>
                                    <p>Cores favoritas: <span id="favorite-colors" class="font-bold">-</span></p>
                                </div>
                            </div>

                            <div class="bg-gradient-to-r from-blue-100 to-blue-200 rounded-lg p-4">
                                <div class="flex items-center justify-between mb-2">
                                    <h4 class="font-bold text-blue-800">🧠 Memória</h4>
                                    <span class="text-2xl">🧠</span>
                                </div>
                                <div class="text-sm text-blue-700">
                                    <p>Jogos completados: <span id="memory-games" class="font-bold">0</span></p>
                                    <p>Melhor pontuação: <span id="memory-best" class="font-bold">0 pts</span></p>
                                    <p>Taxa de acerto: <span id="memory-accuracy" class="font-bold">0%</span></p>
                                </div>
                            </div>

                            <div class="bg-gradient-to-r from-green-100 to-green-200 rounded-lg p-4">
                                <div class="flex items-center justify-between mb-2">
                                    <h4 class="font-bold text-green-800">🔤 Alfabeto</h4>
                                    <span class="text-2xl">🔤</span>
                                </div>
                                <div class="text-sm text-green-700">
                                    <p>Letras aprendidas: <span id="letters-learned" class="font-bold">0/26</span></p>
                                    <p>Palavras conhecidas: <span id="words-known" class="font-bold">0</span></p>
                                    <p>Progresso: <span id="alphabet-progress" class="font-bold">0%</span></p>
                                </div>
                            </div>

                            <div class="bg-gradient-to-r from-purple-100 to-purple-200 rounded-lg p-4">
                                <div class="flex items-center justify-between mb-2">
                                    <h4 class="font-bold text-purple-800">🌈 Sequência</h4>
                                    <span class="text-2xl">🌈</span>
                                </div>
                                <div class="text-sm text-purple-700">
                                    <p>Nível máximo: <span id="sequence-max-level" class="font-bold">0</span></p>
                                    <p>Melhor pontuação: <span id="sequence-best-score" class="font-bold">0 pts</span>
                                    </p>
                                    <p>Sequências corretas: <span id="sequences-correct" class="font-bold">0</span></p>
                                </div>
                            </div>
                        </div>

                        <!-- Progresso Geral -->
                        <div class="mt-6 pt-6 border-t border-gray-200">
                            <h4 class="text-lg font-bold text-gray-800 mb-4">🏆 Progresso Geral</h4>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <div class="text-center">
                                    <div class="text-3xl font-bold text-blue-600" id="total-points">0</div>
                                    <p class="text-sm text-gray-600">Pontos Totais</p>
                                </div>
                                <div class="text-center">
                                    <div class="text-3xl font-bold text-green-600" id="days-active">0</div>
                                    <p class="text-sm text-gray-600">Dias Ativos</p>
                                </div>
                                <div class="text-center">
                                    <div class="text-3xl font-bold text-purple-600" id="achievements">0</div>
                                    <p class="text-sm text-gray-600">Conquistas</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Login Tab -->
        <div id="login" class="tab-content">
            <div class="max-w-md mx-auto">
                <div class="bg-white rounded-lg shadow-sm p-6">
                    <div class="text-center mb-6">
                        <h2 class="text-2xl font-bold text-gray-800">Acesso ao Sistema</h2>
                        <p class="text-gray-600 mt-2">Entre ou cadastre-se para salvar seu progresso</p>
                    </div>

                    <!-- Login Form -->
                    <div id="login-form">
                        <h3 class="text-lg font-bold mb-4">Entrar</h3>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                                <input type="email" id="login-email"
                                    class="w-full px-3 py-2 border border-gray-300 rounded-lg"
                                    placeholder="seu@email.com">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Senha</label>
                                <input type="password" id="login-password"
                                    class="w-full px-3 py-2 border border-gray-300 rounded-lg" placeholder="Sua senha">
                            </div>
                            <button id="login-btn" class="w-full btn-primary text-white font-bold py-2 px-4 rounded-lg">
                                Entrar
                            </button>
                        </div>
                        <div class="text-center mt-4">
                            <button id="show-register" class="text-blue-600 hover:underline text-sm">
                                Não tem conta? Cadastre-se aqui
                            </button>
                        </div>
                    </div>

                    <!-- Register Form -->
                    <div id="register-form" style="display: none;">
                        <h3 class="text-lg font-bold mb-4">Cadastrar</h3>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Nome da criança</label>
                                <input type="text" id="register-name"
                                    class="w-full px-3 py-2 border border-gray-300 rounded-lg"
                                    placeholder="Nome completo">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Idade</label>
                                <input type="number" id="register-age"
                                    class="w-full px-3 py-2 border border-gray-300 rounded-lg" placeholder="Idade"
                                    min="3" max="18">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Data de nascimento</label>
                                <input type="date" id="register-birthdate"
                                    class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Gênero</label>
                                <select id="register-gender" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                                    <option value="">Selecione o gênero</option>
                                    <option value="feminino">Feminino</option>
                                    <option value="masculino">Masculino</option>
                                    <option value="outro">Outro</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Município</label>
                                <input type="text" id="register-city"
                                    class="w-full px-3 py-2 border border-gray-300 rounded-lg" placeholder="Município">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Estado</label>
                                <select id="register-state" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                                    <option value="">Selecione o estado</option>
                                    <option value="AC">Acre</option>
                                    <option value="AL">Alagoas</option>
                                    <option value="AP">Amapá</option>
                                    <option value="AM">Amazonas</option>
                                    <option value="BA">Bahia</option>
                                    <option value="CE">Ceará</option>
                                    <option value="DF">Distrito Federal</option>
                                    <option value="ES">Espírito Santo</option>
                                    <option value="GO">Goiás</option>
                                    <option value="MA">Maranhão</option>
                                    <option value="MT">Mato Grosso</option>
                                    <option value="MS">Mato Grosso do Sul</option>
                                    <option value="MG">Minas Gerais</option>
                                    <option value="PA">Pará</option>
                                    <option value="PB">Paraíba</option>
                                    <option value="PR">Paraná</option>
                                    <option value="PE">Pernambuco</option>
                                    <option value="PI">Piauí</option>
                                    <option value="RJ">Rio de Janeiro</option>
                                    <option value="RN">Rio Grande do Norte</option>
                                    <option value="RS">Rio Grande do Sul</option>
                                    <option value="RO">Rondônia</option>
                                    <option value="RR">Roraima</option>
                                    <option value="SC">Santa Catarina</option>
                                    <option value="SP">São Paulo</option>
                                    <option value="SE">Sergipe</option>
                                    <option value="TO">Tocantins</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Email do responsável</label>
                                <input type="email" id="register-email"
                                    class="w-full px-3 py-2 border border-gray-300 rounded-lg"
                                    placeholder="email@exemplo.com">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Senha</label>
                                <input type="password" id="register-password"
                                    class="w-full px-3 py-2 border border-gray-300 rounded-lg"
                                    placeholder="Crie uma senha">
                            </div>
                            <button id="register-btn"
                                class="w-full btn-primary text-white font-bold py-2 px-4 rounded-lg">
                                Cadastrar
                            </button>
                        </div>
                        <div class="text-center mt-4">
                            <button id="show-login" class="text-blue-600 hover:underline text-sm">
                                Já tem conta? Entre aqui
                            </button>
                        </div>
                    </div>

                    <!-- Logout Button (hidden initially) -->
                    <div id="logout-section" style="display: none;" class="text-center">
                        <p class="mb-4">Logado como: <span id="logged-user" class="font-bold"></span></p>
                        <button id="logout-btn"
                            class="bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-lg">
                            Sair
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sobre Nós Tab -->
        <div id="sobre" class="tab-content">
            <h2 class="text-2xl font-bold mb-4">Sobre Nós</h2>
            <div class="bg-white rounded-lg shadow-sm p-6">
                <p class="mb-6 text-lg">O ComunicAção é um projeto desenvolvido para auxiliar crianças com Transtorno do
                    Espectro Autista (TEA) em sua comunicação diária. Nossa missão é tornar a comunicação mais acessível
                    e divertida, utilizando tecnologia para criar pontes entre as crianças e o mundo ao seu redor.</p>

                <h3 class="text-xl font-bold mb-4">Criadores</h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                    <div class="bg-gray-50 rounded-lg p-3 flex flex-col items-center">
                        <div
                            class="mb-2 w-16 h-16 bg-gray-200 rounded-full flex items-center justify-center overflow-hidden">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 text-gray-400" fill="none"
                                viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                            </svg>
                        </div>
                        <h4 class="text-sm font-bold mb-1">Helloisy Cristiny</h4>
                        <p class="text-gray-600 text-center text-xs">Desenvolvedora</p>
                    </div>

                    <div class="bg-gray-50 rounded-lg p-3 flex flex-col items-center">
                        <div
                            class="mb-2 w-16 h-16 bg-gray-200 rounded-full flex items-center justify-center overflow-hidden">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 text-gray-400" fill="none"
                                viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                            </svg>
                        </div>
                        <h4 class="text-sm font-bold mb-1">Ramily Sá</h4>
                        <p class="text-gray-600 text-center text-xs">Desenvolvedora</p>
                    </div>

                    <div class="bg-gray-50 rounded-lg p-3 flex flex-col items-center">
                        <div
                            class="mb-2 w-16 h-16 bg-gray-200 rounded-full flex items-center justify-center overflow-hidden">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 text-gray-400" fill="none"
                                viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                            </svg>
                        </div>
                        <h4 class="text-sm font-bold mb-1">João Aquime</h4>
                        <p class="text-gray-600 text-center text-xs">Desenvolvedor</p>
                    </div>
                </div>

                <div class="mb-6 p-4 bg-blue-50 rounded-lg border border-blue-200">
                    <h3 class="text-lg font-bold mb-2 text-blue-800">🎓 Agradecimento Especial</h3>
                    <p class="text-blue-700">
                        Agradecemos ao <strong>IFPA Campus Cametá</strong> pelo apoio e suporte no desenvolvimento deste
                        projeto.
                        A instituição foi fundamental para tornar possível esta ferramenta que visa auxiliar crianças
                        com TEA
                        e suas famílias no processo de comunicação e desenvolvimento.
                    </p>
                </div>

                <div class="mt-6">
                    <h3 class="text-xl font-bold mb-3">Contato</h3>
                    <div class="space-y-2">
                        <div class="flex items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-500 mr-2" fill="none"
                                viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                            </svg>
                            <a href="mailto:teacomunicar@gmail.com"
                                class="text-blue-600 hover:underline">teacomunicar@gmail.com</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-4 mt-6">
        <div class="container mx-auto px-4">
            <div class="mt-4 text-center text-gray-400 text-sm">
                &copy; 2025 ComunicAção - Todos os direitos reservados
            </div>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Dados da rotina por dia da semana
            const routineData = {
                'Segunda-feira': [
                    { id: 1, task: 'Café da manhã', time: '07:00 - 07:30', emoji: '🥣', completed: true },
                    { id: 2, task: 'Escovar os dentes', time: '07:30 - 07:45', emoji: '🪥', completed: true },
                    { id: 3, task: 'Ir para a escola', time: '07:45 - 08:00', emoji: '🚌', completed: true },
                    { id: 4, task: 'Aula de matemática', time: '08:00 - 09:30', emoji: '🔢', completed: false, current: true },
                    { id: 5, task: 'Recreio', time: '09:30 - 10:00', emoji: '🍎', completed: false },
                    { id: 6, task: 'Aula de português', time: '10:00 - 11:30', emoji: '📚', completed: false },
                    { id: 7, task: 'Almoço', time: '12:00 - 13:00', emoji: '🍽️', completed: false },
                    { id: 8, task: 'Descanso', time: '13:00 - 14:00', emoji: '😴', completed: false }
                ],
                'Terça-feira': [
                    { id: 1, task: 'Café da manhã', time: '07:00 - 07:30', emoji: '🥣', completed: false },
                    { id: 2, task: 'Escovar os dentes', time: '07:30 - 07:45', emoji: '🪥', completed: false },
                    { id: 3, task: 'Ir para a escola', time: '07:45 - 08:00', emoji: '🚌', completed: false },
                    { id: 4, task: 'Aula de ciências', time: '08:00 - 09:30', emoji: '🔬', completed: false },
                    { id: 5, task: 'Recreio', time: '09:30 - 10:00', emoji: '🍎', completed: false },
                    { id: 6, task: 'Educação física', time: '10:00 - 11:30', emoji: '⚽', completed: false },
                    { id: 7, task: 'Almoço', time: '12:00 - 13:00', emoji: '🍽️', completed: false },
                    { id: 8, task: 'Atividade artística', time: '13:00 - 14:00', emoji: '🎨', completed: false }
                ],
                'Quarta-feira': [
                    { id: 1, task: 'Café da manhã', time: '07:00 - 07:30', emoji: '🥣', completed: false },
                    { id: 2, task: 'Escovar os dentes', time: '07:30 - 07:45', emoji: '🪥', completed: false },
                    { id: 3, task: 'Ir para a escola', time: '07:45 - 08:00', emoji: '🚌', completed: false },
                    { id: 4, task: 'Aula de história', time: '08:00 - 09:30', emoji: '📜', completed: false },
                    { id: 5, task: 'Recreio', time: '09:30 - 10:00', emoji: '🍎', completed: false },
                    { id: 6, task: 'Aula de geografia', time: '10:00 - 11:30', emoji: '🌍', completed: false },
                    { id: 7, task: 'Almoço', time: '12:00 - 13:00', emoji: '🍽️', completed: false },
                    { id: 8, task: 'Biblioteca', time: '13:00 - 14:00', emoji: '📖', completed: false }
                ],
                'Quinta-feira': [
                    { id: 1, task: 'Café da manhã', time: '07:00 - 07:30', emoji: '🥣', completed: false },
                    { id: 2, task: 'Escovar os dentes', time: '07:30 - 07:45', emoji: '🪥', completed: false },
                    { id: 3, task: 'Ir para a escola', time: '07:45 - 08:00', emoji: '🚌', completed: false },
                    { id: 4, task: 'Aula de inglês', time: '08:00 - 09:30', emoji: '🇺🇸', completed: false },
                    { id: 5, task: 'Recreio', time: '09:30 - 10:00', emoji: '🍎', completed: false },
                    { id: 6, task: 'Aula de música', time: '10:00 - 11:30', emoji: '🎵', completed: false },
                    { id: 7, task: 'Almoço', time: '12:00 - 13:00', emoji: '🍽️', completed: false },
                    { id: 8, task: 'Jogos educativos', time: '13:00 - 14:00', emoji: '🎮', completed: false }
                ],
                'Sexta-feira': [
                    { id: 1, task: 'Café da manhã', time: '07:00 - 07:30', emoji: '🥣', completed: false },
                    { id: 2, task: 'Escovar os dentes', time: '07:30 - 07:45', emoji: '🪥', completed: false },
                    { id: 3, task: 'Ir para a escola', time: '07:45 - 08:00', emoji: '🚌', completed: false },
                    { id: 4, task: 'Revisão geral', time: '08:00 - 09:30', emoji: '📝', completed: false },
                    { id: 5, task: 'Recreio', time: '09:30 - 10:00', emoji: '🍎', completed: false },
                    { id: 6, task: 'Atividade livre', time: '10:00 - 11:30', emoji: '🎪', completed: false },
                    { id: 7, task: 'Almoço', time: '12:00 - 13:00', emoji: '🍽️', completed: false },
                    { id: 8, task: 'Preparação fim de semana', time: '13:00 - 14:00', emoji: '🎉', completed: false }
                ],
                'Sábado': [
                    { id: 1, task: 'Café da manhã', time: '08:00 - 08:30', emoji: '🥣', completed: false },
                    { id: 2, task: 'Escovar os dentes', time: '08:30 - 08:45', emoji: '🪥', completed: false },
                    { id: 3, task: 'Brincar livre', time: '09:00 - 10:30', emoji: '🧸', completed: false },
                    { id: 4, task: 'Passeio no parque', time: '10:30 - 12:00', emoji: '🌳', completed: false },
                    { id: 5, task: 'Almoço', time: '12:00 - 13:00', emoji: '🍽️', completed: false },
                    { id: 6, task: 'Descanso', time: '13:00 - 14:00', emoji: '😴', completed: false },
                    { id: 7, task: 'Atividade em família', time: '14:00 - 16:00', emoji: '👨‍👩‍👧‍👦', completed: false },
                    { id: 8, task: 'Jantar', time: '18:00 - 19:00', emoji: '🍽️', completed: false }
                ],
                'Domingo': [
                    { id: 1, task: 'Café da manhã', time: '08:30 - 09:00', emoji: '🥣', completed: false },
                    { id: 2, task: 'Escovar os dentes', time: '09:00 - 09:15', emoji: '🪥', completed: false },
                    { id: 3, task: 'Atividade relaxante', time: '09:30 - 11:00', emoji: '🧘', completed: false },
                    { id: 4, task: 'Preparar semana', time: '11:00 - 12:00', emoji: '📅', completed: false },
                    { id: 5, task: 'Almoço especial', time: '12:00 - 13:30', emoji: '🍽️', completed: false },
                    { id: 6, task: 'Descanso', time: '13:30 - 15:00', emoji: '😴', completed: false },
                    { id: 7, task: 'Tempo em família', time: '15:00 - 17:00', emoji: '❤️', completed: false },
                    { id: 8, task: 'Preparar para segunda', time: '17:00 - 18:00', emoji: '🎒', completed: false }
                ]
            };

            const daysOfWeek = ['Segunda-feira', 'Terça-feira', 'Quarta-feira', 'Quinta-feira', 'Sexta-feira', 'Sábado', 'Domingo'];
            let currentDayIndex = 0;

            // Alfabeto com palavras e emojis
            const alphabetData = {
                'A': { word: 'Abelha', emoji: '🐝' },
                'B': { word: 'Bola', emoji: '⚽' },
                'C': { word: 'Casa', emoji: '🏠' },
                'D': { word: 'Dado', emoji: '🎲' },
                'E': { word: 'Elefante', emoji: '🐘' },
                'F': { word: 'Flor', emoji: '🌸' },
                'G': { word: 'Gato', emoji: '🐱' },
                'H': { word: 'Hipopótamo', emoji: '🦛' },
                'I': { word: 'Igreja', emoji: '⛪' },
                'J': { word: 'Jacaré', emoji: '🐊' },
                'K': { word: 'Kiwi', emoji: '🥝' },
                'L': { word: 'Leão', emoji: '🦁' },
                'M': { word: 'Macaco', emoji: '🐵' },
                'N': { word: 'Navio', emoji: '🚢' },
                'O': { word: 'Ovo', emoji: '🥚' },
                'P': { word: 'Pato', emoji: '🦆' },
                'Q': { word: 'Queijo', emoji: '🧀' },
                'R': { word: 'Rato', emoji: '🐭' },
                'S': { word: 'Sol', emoji: '☀️' },
                'T': { word: 'Tartaruga', emoji: '🐢' },
                'U': { word: 'Uva', emoji: '🍇' },
                'V': { word: 'Vaca', emoji: '🐄' },
                'W': { word: 'WiFi', emoji: '📶' },
                'X': { word: 'Xícara', emoji: '☕' },
                'Y': { word: 'Yoga', emoji: '🧘' },
                'Z': { word: 'Zebra', emoji: '🦓' }
            };

            let currentLetterIndex = 0;
            const letters = Object.keys(alphabetData);

            // Variáveis dos jogos
            let memoryCards = [];
            let memoryScore = 0;
            let flippedCards = [];
            let canFlip = true;

            let sequenceGame = {
                sequence: [],
                playerSequence: [],
                level: 1,
                score: 0,
                isPlaying: false,
                showingSequence: false
            };

            // Variáveis do desenho
            let isDrawing = false;
            let currentColor = '#000000';
            let currentBrushSize = 5;
            let canvas, ctx;

            // Sistema de estatísticas
            let gameStats = {
                drawing: { count: 0, time: 0, colors: [] },
                memory: { games: 0, bestScore: 0, totalMatches: 0, totalAttempts: 0 },
                alphabet: { lettersLearned: 0, wordsKnown: 0 },
                sequence: { maxLevel: 0, bestScore: 0, correctSequences: 0 },
                general: { totalPoints: 0, daysActive: 0, achievements: 0 }
            };

            // Carregar estatísticas salvas
            function loadStats() {
                const saved = localStorage.getItem('gameStats');
                if (saved) {
                    gameStats = { ...gameStats, ...JSON.parse(saved) };
                }
                updateStatsDisplay();
            }

            // Salvar estatísticas
            function saveStats() {
                localStorage.setItem('gameStats', JSON.stringify(gameStats));
                updateStatsDisplay();
            }

            // Atualizar display das estatísticas
            function updateStatsDisplay() {
                document.getElementById('drawing-count').textContent = gameStats.drawing.count;
                document.getElementById('drawing-time').textContent = Math.floor(gameStats.drawing.time / 60) + 'min';
                document.getElementById('favorite-colors').textContent = gameStats.drawing.colors.length > 0 ? gameStats.drawing.colors.slice(0, 2).join(', ') : '-';

                document.getElementById('memory-games').textContent = gameStats.memory.games;
                document.getElementById('memory-best').textContent = gameStats.memory.bestScore + ' pts';
                document.getElementById('memory-accuracy').textContent = gameStats.memory.totalAttempts > 0 ? Math.round((gameStats.memory.totalMatches / gameStats.memory.totalAttempts) * 100) + '%' : '0%';

                document.getElementById('letters-learned').textContent = gameStats.alphabet.lettersLearned + '/26';
                document.getElementById('words-known').textContent = gameStats.alphabet.wordsKnown;
                document.getElementById('alphabet-progress').textContent = Math.round((gameStats.alphabet.lettersLearned / 26) * 100) + '%';

                document.getElementById('sequence-max-level').textContent = gameStats.sequence.maxLevel;
                document.getElementById('sequence-best-score').textContent = gameStats.sequence.bestScore + ' pts';
                document.getElementById('sequences-correct').textContent = gameStats.sequence.correctSequences;

                document.getElementById('total-points').textContent = gameStats.general.totalPoints;
                document.getElementById('days-active').textContent = gameStats.general.daysActive;
                document.getElementById('achievements').textContent = gameStats.general.achievements;

                // Atualizar nível e progresso
                const level = Math.floor(gameStats.general.totalPoints / 100) + 1;
                const pointsInCurrentLevel = gameStats.general.totalPoints % 100;
                const pointsToNext = 100 - pointsInCurrentLevel;

                document.getElementById('user-level').textContent = level;
                document.getElementById('points-to-next').textContent = pointsToNext;
                document.getElementById('level-progress-bar').style.width = pointsInCurrentLevel + '%';
            }

            // Navegação por tabs
            const tabButtons = document.querySelectorAll('.tab-button');
            const tabContents = document.querySelectorAll('.tab-content');

            tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const tabId = button.getAttribute('data-tab');

                    tabButtons.forEach(btn => btn.classList.remove('bg-white', 'bg-opacity-20'));
                    tabContents.forEach(content => content.classList.remove('active'));

                    button.classList.add('bg-white', 'bg-opacity-20');
                    document.getElementById(tabId).classList.add('active');
                });
            });

            // Alternar tema
            const themeGirlBtn = document.getElementById('theme-girl');
            const themeBoyBtn = document.getElementById('theme-boy');

            themeGirlBtn.addEventListener('click', () => {
                document.body.className = 'theme-girl bg-gray-50';
            });

            themeBoyBtn.addEventListener('click', () => {
                document.body.className = 'theme-boy bg-gray-50';
            });

            // Controle de tamanho da fonte
            const fontDecreaseBtn = document.getElementById('font-decrease');
            const fontResetBtn = document.getElementById('font-reset');
            const fontIncreaseBtn = document.getElementById('font-increase');
            let currentFontSize = 100;

            fontDecreaseBtn.addEventListener('click', () => {
                if (currentFontSize > 80) {
                    currentFontSize -= 10;
                    document.querySelector('.font-size-control').style.fontSize = `${currentFontSize}%`;
                }
            });

            fontResetBtn.addEventListener('click', () => {
                currentFontSize = 100;
                document.querySelector('.font-size-control').style.fontSize = '100%';
            });

            fontIncreaseBtn.addEventListener('click', () => {
                if (currentFontSize < 130) {
                    currentFontSize += 10;
                    document.querySelector('.font-size-control').style.fontSize = `${currentFontSize}%`;
                }
            });

            // Comunicação - Cartões e Fala
            const commCards = document.querySelectorAll('.comm-card');
            const sentenceDisplay = document.getElementById('sentence-display');
            const speakButton = document.getElementById('speak-button');
            const clearButton = document.getElementById('clear-button');
            let selectedCards = [];

            commCards.forEach(card => {
                card.addEventListener('click', () => {
                    card.classList.toggle('selected');
                    updateSentence();
                });

                card.addEventListener('dblclick', () => {
                    const text = card.getAttribute('data-text');
                    speak(text);
                });
            });

            function updateSentence() {
                selectedCards = Array.from(document.querySelectorAll('.comm-card.selected'));

                if (selectedCards.length === 0) {
                    sentenceDisplay.innerHTML = '<p class="text-gray-500">Selecione cartões para formar sua frase ou clique duas vezes para falar imediatamente...</p>';
                } else {
                    const sentence = selectedCards.map(card => card.getAttribute('data-text')).join(' ');
                    sentenceDisplay.innerHTML = `<p class="text-gray-800 font-medium">${sentence}</p>`;
                }
            }

            speakButton.addEventListener('click', () => {
                if (selectedCards.length > 0) {
                    const sentence = selectedCards.map(card => card.getAttribute('data-text')).join(' ');
                    speak(sentence);
                }
            });

            clearButton.addEventListener('click', () => {
                selectedCards.forEach(card => card.classList.remove('selected'));
                updateSentence();
            });

            function speak(text) {
                const speechRate = document.getElementById('speech-rate').value;
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'pt-BR';
                utterance.rate = parseFloat(speechRate);
                window.speechSynthesis.speak(utterance);
            }

            // Rotina - Funcionalidades
            function loadRoutine() {
                const currentDay = daysOfWeek[currentDayIndex];
                const routineItems = routineData[currentDay];
                const container = document.getElementById('routine-items');

                document.getElementById('current-day').textContent = currentDay;

                container.innerHTML = '';

                let completedCount = 0;

                routineItems.forEach(item => {
                    if (item.completed) completedCount++;

                    const itemElement = document.createElement('div');
                    itemElement.className = `routine-item bg-white p-3 pl-4 rounded-lg shadow-sm flex items-center justify-between cursor-pointer ${item.completed ? 'completed' : ''} ${item.current ? 'current' : ''}`;

                    itemElement.innerHTML = `
                        <div class="flex items-center">
                            <div class="rounded-full p-2 mr-3 ${item.completed ? 'bg-green-100' : item.current ? 'bg-blue-100' : 'bg-gray-100'}">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 ${item.completed ? 'text-green-600' : item.current ? 'text-blue-600' : 'text-gray-400'}" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    ${item.completed ? '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />' : '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />'}
                                </svg>
                            </div>
                            <div>
                                <h4 class="font-medium">${item.task}</h4>
                                <p class="text-sm text-gray-500">${item.time}</p>
                            </div>
                        </div>
                        <div class="flex items-center">
                            <span class="text-2xl mr-2">${item.emoji}</span>
                        </div>
                    `;

                    itemElement.addEventListener('click', () => {
                        if (!item.completed) {
                            item.completed = true;
                            loadRoutine();
                            speak(`${item.task} concluída!`);
                        }
                    });

                    container.appendChild(itemElement);
                });

                // Atualizar progresso
                const totalCount = routineItems.length;
                const progressPercentage = (completedCount / totalCount) * 100;

                document.getElementById('completed-count').textContent = completedCount;
                document.getElementById('total-count').textContent = totalCount;
                document.getElementById('progress-bar').style.width = `${progressPercentage}%`;
            }

            document.getElementById('prev-day').addEventListener('click', () => {
                currentDayIndex = (currentDayIndex - 1 + daysOfWeek.length) % daysOfWeek.length;
                loadRoutine();
            });

            document.getElementById('next-day').addEventListener('click', () => {
                currentDayIndex = (currentDayIndex + 1) % daysOfWeek.length;
                loadRoutine();
            });

            // Jogos - Navegação
            const gameCards = document.querySelectorAll('.game-card');
            const gameContainers = document.querySelectorAll('.game-container');
            const backButtons = document.querySelectorAll('.back-to-games');

            gameCards.forEach(card => {
                card.addEventListener('click', () => {
                    const gameId = card.getAttribute('data-game');
                    document.getElementById('game-selection').style.display = 'none';
                    document.getElementById(`${gameId}-game`).classList.add('active');

                    // Inicializar jogos específicos
                    if (gameId === 'drawing') {
                        initDrawingGame();
                    } else if (gameId === 'memory') {
                        initMemoryGame();
                    } else if (gameId === 'alphabet') {
                        updateAlphabetDisplay();
                    }
                });
            });

            backButtons.forEach(button => {
                button.addEventListener('click', () => {
                    gameContainers.forEach(container => container.classList.remove('active'));
                    document.getElementById('game-selection').style.display = 'grid';
                });
            });

            // Jogo de Desenho
            function initDrawingGame() {
                canvas = document.getElementById('drawing-canvas');
                ctx = canvas.getContext('2d');

                // Ajustar tamanho do canvas
                canvas.width = canvas.offsetWidth;
                canvas.height = 400;

                // Event listeners para desenho
                canvas.addEventListener('mousedown', startDrawing);
                canvas.addEventListener('mousemove', draw);
                canvas.addEventListener('mouseup', stopDrawing);
                canvas.addEventListener('mouseout', stopDrawing);

                // Touch events para dispositivos móveis
                canvas.addEventListener('touchstart', handleTouch);
                canvas.addEventListener('touchmove', handleTouch);
                canvas.addEventListener('touchend', stopDrawing);

                // Seletores de cor
                document.querySelectorAll('.color-swatch').forEach(swatch => {
                    swatch.addEventListener('click', () => {
                        document.querySelectorAll('.color-swatch').forEach(s => s.classList.remove('active'));
                        swatch.classList.add('active');
                        currentColor = swatch.getAttribute('data-color');

                        // Adicionar cor às favoritas
                        const colorName = getColorName(currentColor);
                        if (!gameStats.drawing.colors.includes(colorName)) {
                            gameStats.drawing.colors.push(colorName);
                            if (gameStats.drawing.colors.length > 3) {
                                gameStats.drawing.colors = gameStats.drawing.colors.slice(-3);
                            }
                        }
                    });
                });

                // Seletores de tamanho do pincel
                document.querySelectorAll('.brush-size').forEach(brush => {
                    brush.addEventListener('click', () => {
                        document.querySelectorAll('.brush-size').forEach(b => b.classList.remove('active'));
                        brush.classList.add('active');
                        currentBrushSize = parseInt(brush.getAttribute('data-size'));
                    });
                });

                // Botão limpar
                document.getElementById('clear-drawing').addEventListener('click', () => {
                    ctx.clearRect(0, 0, canvas.width, canvas.height);

                    // Contar como desenho criado
                    gameStats.drawing.count++;
                    gameStats.drawing.time += 60; // Assumir 1 minuto por desenho
                    gameStats.general.totalPoints += 5;
                    saveStats();
                });
            }

            function getColorName(hex) {
                const colors = {
                    '#000000': 'Preto',
                    '#FF0000': 'Vermelho',
                    '#00FF00': 'Verde',
                    '#0000FF': 'Azul',
                    '#FFFF00': 'Amarelo',
                    '#FF00FF': 'Rosa',
                    '#FFA500': 'Laranja',
                    '#800080': 'Roxo'
                };
                return colors[hex] || 'Cor';
            }

            function startDrawing(e) {
                isDrawing = true;
                draw(e);
            }

            function draw(e) {
                if (!isDrawing) return;

                const rect = canvas.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;

                ctx.lineWidth = currentBrushSize;
                ctx.lineCap = 'round';
                ctx.strokeStyle = currentColor;

                ctx.lineTo(x, y);
                ctx.stroke();
                ctx.beginPath();
                ctx.moveTo(x, y);
            }

            function stopDrawing() {
                if (isDrawing) {
                    isDrawing = false;
                    ctx.beginPath();
                }
            }

            function handleTouch(e) {
                e.preventDefault();
                const touch = e.touches[0];
                const mouseEvent = new MouseEvent(e.type === 'touchstart' ? 'mousedown' :
                    e.type === 'touchmove' ? 'mousemove' : 'mouseup', {
                    clientX: touch.clientX,
                    clientY: touch.clientY
                });
                canvas.dispatchEvent(mouseEvent);
            }

            // Jogo da Memória
            function initMemoryGame() {
                const emojis = ['🐶', '🐱', '🐭', '🐹', '🐰', '🦊', '🐻', '🐼'];
                memoryCards = [...emojis, ...emojis].sort(() => Math.random() - 0.5);
                memoryScore = 0;
                flippedCards = [];
                canFlip = true;

                document.getElementById('memory-score').textContent = memoryScore;

                const board = document.getElementById('memory-board');
                board.innerHTML = '';

                memoryCards.forEach((emoji, index) => {
                    const card = document.createElement('div');
                    card.className = 'memory-card bg-blue-500 h-20 rounded-lg relative cursor-pointer';
                    card.innerHTML = `
                        <div class="memory-card-front bg-blue-500 text-white font-bold text-lg flex items-center justify-center">?</div>
                        <div class="memory-card-back bg-white text-4xl flex items-center justify-center">${emoji}</div>
                    `;
                    card.addEventListener('click', () => flipCard(card, index, emoji));
                    board.appendChild(card);
                });

                document.getElementById('reset-memory').addEventListener('click', initMemoryGame);
            }

            function flipCard(card, index, emoji) {
                if (!canFlip || card.classList.contains('flipped') || flippedCards.length >= 2) return;

                card.classList.add('flipped');
                flippedCards.push({ card, index, emoji });

                if (flippedCards.length === 2) {
                    canFlip = false;
                    setTimeout(checkMatch, 1000);
                }
            }

            function checkMatch() {
                const [first, second] = flippedCards;
                gameStats.memory.totalAttempts++;

                if (first.emoji === second.emoji) {
                    memoryScore += 10;
                    gameStats.memory.totalMatches++;
                    gameStats.general.totalPoints += 10;
                    document.getElementById('memory-score').textContent = memoryScore;
                    speak('Parabéns! Você encontrou um par!');

                    // Verificar se o jogo terminou
                    if (document.querySelectorAll('.memory-card.flipped').length === memoryCards.length) {
                        gameStats.memory.games++;
                        if (memoryScore > gameStats.memory.bestScore) {
                            gameStats.memory.bestScore = memoryScore;
                        }
                        gameStats.general.totalPoints += 20; // Bônus por completar
                        saveStats();

                        setTimeout(() => {
                            speak('Parabéns! Você completou o jogo da memória!');
                        }, 500);
                    }
                } else {
                    first.card.classList.remove('flipped');
                    second.card.classList.remove('flipped');
                }

                flippedCards = [];
                canFlip = true;
                saveStats();
            }

            // Alfabeto
            function updateAlphabetDisplay() {
                const letter = letters[currentLetterIndex];
                const data = alphabetData[letter];

                document.getElementById('current-letter').textContent = letter;
                document.getElementById('big-letter').textContent = letter;
                document.getElementById('letter-word').textContent = data.word;
                document.getElementById('letter-emoji').textContent = data.emoji;

                // Atualizar estatísticas do alfabeto
                if (currentLetterIndex + 1 > gameStats.alphabet.lettersLearned) {
                    gameStats.alphabet.lettersLearned = currentLetterIndex + 1;
                    gameStats.alphabet.wordsKnown = currentLetterIndex + 1;
                    gameStats.general.totalPoints += 2;
                    saveStats();
                }
            }

            document.getElementById('prev-letter').addEventListener('click', () => {
                currentLetterIndex = (currentLetterIndex - 1 + letters.length) % letters.length;
                updateAlphabetDisplay();
            });

            document.getElementById('next-letter').addEventListener('click', () => {
                currentLetterIndex = (currentLetterIndex + 1) % letters.length;
                updateAlphabetDisplay();
            });

            document.getElementById('speak-letter').addEventListener('click', () => {
                const letter = letters[currentLetterIndex];
                const data = alphabetData[letter];
                speak(`Letra ${letter}. ${data.word}`);
            });

            // Sequência de Cores
            const colors = ['red', 'blue', 'green', 'yellow'];
            const colorNames = { red: 'vermelho', blue: 'azul', green: 'verde', yellow: 'amarelo' };

            document.getElementById('start-sequence').addEventListener('click', startSequenceGame);

            document.querySelectorAll('.sequence-item').forEach(item => {
                item.addEventListener('click', () => {
                    if (!sequenceGame.isPlaying || sequenceGame.showingSequence) return;

                    const color = item.getAttribute('data-color');
                    const colorName = colorNames[color];

                    // Falar o nome da cor
                    speak(colorName);

                    // Adicionar à sequência do jogador
                    sequenceGame.playerSequence.push(color);

                    // Verificar se está correto
                    const currentIndex = sequenceGame.playerSequence.length - 1;
                    if (sequenceGame.playerSequence[currentIndex] !== sequenceGame.sequence[currentIndex]) {
                        // Erro - reiniciar
                        document.getElementById('sequence-message').textContent = 'Ops! Tente novamente.';
                        setTimeout(() => {
                            resetSequenceGame();
                        }, 1500);
                        return;
                    }

                    // Se completou a sequência
                    if (sequenceGame.playerSequence.length === sequenceGame.sequence.length) {
                        sequenceGame.score += sequenceGame.level * 10;
                        sequenceGame.level++;
                        gameStats.sequence.correctSequences++;
                        gameStats.general.totalPoints += sequenceGame.level * 5;

                        if (sequenceGame.level > gameStats.sequence.maxLevel) {
                            gameStats.sequence.maxLevel = sequenceGame.level;
                        }
                        if (sequenceGame.score > gameStats.sequence.bestScore) {
                            gameStats.sequence.bestScore = sequenceGame.score;
                        }

                        saveStats();

                        document.getElementById('sequence-score').textContent = sequenceGame.score;
                        document.getElementById('sequence-level').textContent = sequenceGame.level;
                        document.getElementById('sequence-message').textContent = 'Parabéns! Próximo nível...';

                        setTimeout(() => {
                            nextSequenceLevel();
                        }, 1500);
                    }
                });
            });

            function startSequenceGame() {
                sequenceGame = {
                    sequence: [],
                    playerSequence: [],
                    level: 1,
                    score: 0,
                    isPlaying: true,
                    showingSequence: false
                };

                document.getElementById('sequence-level').textContent = sequenceGame.level;
                document.getElementById('sequence-score').textContent = sequenceGame.score;
                document.getElementById('start-sequence').style.display = 'none';

                nextSequenceLevel();
            }

            function nextSequenceLevel() {
                sequenceGame.playerSequence = [];
                sequenceGame.sequence.push(colors[Math.floor(Math.random() * colors.length)]);

                document.getElementById('sequence-message').textContent = 'Observe a sequência...';
                showSequence();
            }

            function showSequence() {
                sequenceGame.showingSequence = true;
                let index = 0;

                const showNext = () => {
                    if (index < sequenceGame.sequence.length) {
                        const color = sequenceGame.sequence[index];
                        const colorName = colorNames[color];
                        const element = document.querySelector(`[data-color="${color}"]`);

                        // Destacar e falar a cor
                        element.classList.add('highlight');
                        speak(colorName);

                        setTimeout(() => {
                            element.classList.remove('highlight');
                            index++;
                            setTimeout(showNext, 500);
                        }, 800);
                    } else {
                        sequenceGame.showingSequence = false;
                        document.getElementById('sequence-message').textContent = 'Agora é sua vez! Repita a sequência.';
                    }
                };

                setTimeout(showNext, 1000);
            }

            function resetSequenceGame() {
                sequenceGame.isPlaying = false;
                document.getElementById('sequence-message').textContent = '';
                document.getElementById('start-sequence').style.display = 'inline-block';
            }

            // Edição da rotina
            document.getElementById('edit-routine').addEventListener('click', () => {
                showRoutineEditor();
            });

            function showRoutineEditor() {
                const currentDay = daysOfWeek[currentDayIndex];
                const routineItems = routineData[currentDay];

                const modal = document.createElement('div');
                modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4';
                modal.innerHTML = `
                    <div class="bg-white rounded-lg shadow-xl max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto">
                        <h2 class="text-2xl font-bold mb-4">✏️ Editar Rotina - ${currentDay}</h2>
                        
                        <div id="routine-editor-items" class="space-y-3 mb-6">
                            ${routineItems.map((item, index) => `
                                <div class="flex items-center space-x-3 p-3 bg-gray-50 rounded-lg">
                                    <input type="text" value="${item.emoji}" class="w-12 text-center border border-gray-300 rounded" data-field="emoji" data-index="${index}">
                                    <input type="text" value="${item.task}" class="flex-1 border border-gray-300 rounded px-3 py-1" data-field="task" data-index="${index}">
                                    <input type="text" value="${item.time}" class="w-32 border border-gray-300 rounded px-3 py-1" data-field="time" data-index="${index}">
                                    <button class="bg-red-500 hover:bg-red-600 text-white px-2 py-1 rounded text-sm" onclick="removeRoutineItem(${index})">🗑️</button>
                                </div>
                            `).join('')}
                        </div>
                        
                        <div class="flex justify-between">
                            <button id="add-routine-item" class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-lg">
                                ➕ Adicionar Item
                            </button>
                            <div class="space-x-2">
                                <button id="cancel-routine-edit" class="bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg">
                                    Cancelar
                                </button>
                                <button id="save-routine-edit" class="btn-primary text-white font-bold py-2 px-4 rounded-lg">
                                    Salvar
                                </button>
                            </div>
                        </div>
                    </div>
                `;

                document.body.appendChild(modal);

                // Event listeners para o modal
                document.getElementById('cancel-routine-edit').addEventListener('click', () => {
                    document.body.removeChild(modal);
                });

                document.getElementById('save-routine-edit').addEventListener('click', () => {
                    saveRoutineChanges();
                    document.body.removeChild(modal);
                    loadRoutine();
                });

                document.getElementById('add-routine-item').addEventListener('click', () => {
                    addNewRoutineItem();
                });

                function saveRoutineChanges() {
                    const inputs = modal.querySelectorAll('input');
                    inputs.forEach(input => {
                        const field = input.getAttribute('data-field');
                        const index = parseInt(input.getAttribute('data-index'));
                        if (routineItems[index]) {
                            routineItems[index][field] = input.value;
                        }
                    });
                }

                function addNewRoutineItem() {
                    const newItem = {
                        id: routineItems.length + 1,
                        task: 'Nova atividade',
                        time: '00:00 - 00:30',
                        emoji: '⭐',
                        completed: false
                    };
                    routineItems.push(newItem);

                    const container = document.getElementById('routine-editor-items');
                    const newItemDiv = document.createElement('div');
                    newItemDiv.className = 'flex items-center space-x-3 p-3 bg-gray-50 rounded-lg';
                    newItemDiv.innerHTML = `
                        <input type="text" value="${newItem.emoji}" class="w-12 text-center border border-gray-300 rounded" data-field="emoji" data-index="${routineItems.length - 1}">
                        <input type="text" value="${newItem.task}" class="flex-1 border border-gray-300 rounded px-3 py-1" data-field="task" data-index="${routineItems.length - 1}">
                        <input type="text" value="${newItem.time}" class="w-32 border border-gray-300 rounded px-3 py-1" data-field="time" data-index="${routineItems.length - 1}">
                        <button class="bg-red-500 hover:bg-red-600 text-white px-2 py-1 rounded text-sm" onclick="removeRoutineItem(${routineItems.length - 1})">🗑️</button>
                    `;
                    container.appendChild(newItemDiv);
                }

                window.removeRoutineItem = function (index) {
                    routineItems.splice(index, 1);
                    modal.querySelector(`[data-index="${index}"]`).closest('.flex').remove();
                };
            }

            // Sistema de Login/Cadastro
            let currentUser = null;

            // Verificar se há usuário logado
            function checkLoggedUser() {
                const saved = localStorage.getItem('currentUser');
                if (saved) {
                    currentUser = JSON.parse(saved);
                    updateUserDisplay();
                }
            }

            function updateUserDisplay() {
                const currentUser = JSON.parse(localStorage.getItem('currentUser'));
                if (currentUser) {
                    document.getElementById('profile-name').textContent = currentUser.nome_crianca;
                    document.getElementById('logged-user').textContent = currentUser.nome_crianca;
                    document.getElementById('login-form').style.display = 'none';
                    document.getElementById('register-form').style.display = 'none';
                    document.getElementById('logout-section').style.display = 'block';
                } else {
                    document.getElementById('profile-name').textContent = 'Visitante';
                    document.getElementById('login-form').style.display = 'block';
                    document.getElementById('logout-section').style.display = 'none';
                }
            }

            // Alternar entre login e cadastro
            document.getElementById('show-register').addEventListener('click', () => {
                document.getElementById('login-form').style.display = 'none';
                document.getElementById('register-form').style.display = 'block';
            });

            document.getElementById('show-login').addEventListener('click', () => {
                document.getElementById('register-form').style.display = 'none';
                document.getElementById('login-form').style.display = 'block';
            });

            // Login
            // document.getElementById('login-btn').addEventListener('click', (e) => {
            //     e.preventDefault();
            //     const email = document.getElementById('login-email').value;
            //     const password = document.getElementById('login-password').value;

            //     if (!email || !password) {
            //         alert('Por favor, preencha todos os campos.');
            //         return;
            //     }

            //     // Verificar se usuário existe
            //     const users = JSON.parse(localStorage.getItem('users') || '[]');
            //     const user = users.find(u => u.email === email && u.password === password);

            //     if (user) {
            //         currentUser = user;
            //         localStorage.setItem('currentUser', JSON.stringify(currentUser));
            //         updateUserDisplay();
            //         alert('Login realizado com sucesso!');
            //     } else {
            //         alert('Email ou senha incorretos.');
            //     }
            // });

            document.getElementById('login-btn').addEventListener('click', async (e) => {
                e.preventDefault();

                const email_responsavel = document.getElementById('login-email').value.trim();
                const senha = document.getElementById('login-password').value;

                if (!email_responsavel || !senha) {
                    alert('⚠️ Por favor, preencha todos os campos.');
                    return;
                }

                try {
                    const response = await fetch('http://34.151.236.135:3000/api/usuarios/login', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ email_responsavel, senha })
                    });

                    const data = await response.json();

                    if (!response.ok) {
                        alert(`❌ ${data.error || 'Erro ao fazer login.'}`);
                        return;
                    }
                    console.log(data.usuario);

                    // Armazena o usuário logado
                    localStorage.setItem('currentUser', JSON.stringify(data.usuario));

                    alert('✅ Login realizado com sucesso!');
                    updateUserDisplay(); // mantém sua função original
                    // Redirecionar para outra página se quiser
                    // window.location.href = 'home.html';
                } catch (err) {
                    console.error('Erro no login:', err);
                    alert('❌ Erro ao conectar ao servidor.');
                }
            });

            // Cadastro
            document.getElementById('register-btn').addEventListener('click', (e) => {
                e.preventDefault();
                const name = document.getElementById('register-name').value;
                const age = document.getElementById('register-age').value;
                const birthdate = document.getElementById('register-birthdate').value;
                const gender = document.getElementById('register-gender').value;
                const city = document.getElementById('register-city').value;
                const state = document.getElementById('register-state').value;
                const email = document.getElementById('register-email').value;
                const password = document.getElementById('register-password').value;

                if (!name || !age || !birthdate || !gender || !city || !state || !email || !password) {
                    alert('Por favor, preencha todos os campos.');
                    return;
                }

                // Verificar se email já existe
                // const users = JSON.parse(localStorage.getItem('users') || '[]');
                // if (users.find(u => u.email === email)) {
                //     alert('Este email já está cadastrado.');
                //     return;
                // }

                // Criar novo usuário
                const newUser = {
                    id: Date.now(),
                    name,
                    age: parseInt(age),
                    birthdate,
                    gender,
                    city,
                    state,
                    email,
                    password,
                    createdAt: new Date().toISOString()
                };

                users.push(newUser);
                localStorage.setItem('users', JSON.stringify(users));

                currentUser = newUser;
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
                updateUserDisplay();

                alert('Cadastro realizado com sucesso!');

                // Limpar formulário
                document.getElementById('register-form').querySelectorAll('input, select').forEach(input => {
                    input.value = '';
                });
            });

            // Logout
            document.getElementById('logout-btn').addEventListener('click', () => {
                currentUser = null;
                localStorage.removeItem('currentUser');
                updateUserDisplay();
                alert('Logout realizado com sucesso!');
            });

            // Botão de Crise
            document.getElementById('emergency-button').addEventListener('click', () => {
                showCrisisModal();
            });

            function showCrisisModal() {
                const modal = document.createElement('div');
                modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4';
                modal.innerHTML = `
                    <div class="bg-white rounded-lg shadow-xl max-w-md w-full p-6">
                        <div class="text-center mb-6">
                            <div class="text-6xl mb-4">🆘</div>
                            <h2 class="text-2xl font-bold text-red-600 mb-2">Situação de Crise</h2>
                            <p class="text-gray-600">Como você está se sentindo agora?</p>
                        </div>
                        
                        <div class="space-y-3 mb-6">
                            <label class="block">
                                <input type="radio" name="crisis-feeling" value="muito-ansioso" class="mr-2">
                                Muito ansioso(a)
                            </label>
                            <label class="block">
                                <input type="radio" name="crisis-feeling" value="com-medo" class="mr-2">
                                Com medo
                            </label>
                            <label class="block">
                                <input type="radio" name="crisis-feeling" value="muito-bravo" class="mr-2">
                                Muito bravo(a)
                            </label>
                            <label class="block">
                                <input type="radio" name="crisis-feeling" value="confuso" class="mr-2">
                                Confuso(a)
                            </label>
                            <label class="block">
                                <input type="radio" name="crisis-feeling" value="sobrecarregado" class="mr-2">
                                Sobrecarregado(a)
                            </label>
                        </div>
                        
                        <div class="mb-6">
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                O que aconteceu? (opcional)
                            </label>
                            <textarea id="crisis-description" class="w-full px-3 py-2 border border-gray-300 rounded-lg" rows="3" placeholder="Descreva o que está acontecendo..."></textarea>
                        </div>
                        
                        <div class="flex justify-between">
                            <button id="cancel-crisis" class="bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg">
                                Cancelar
                            </button>
                            <button id="save-crisis" class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg">
                                Salvar e Buscar Ajuda
                            </button>
                        </div>
                    </div>
                `;

                document.body.appendChild(modal);

                document.getElementById('cancel-crisis').addEventListener('click', () => {
                    document.body.removeChild(modal);
                });

                document.getElementById('save-crisis').addEventListener('click', () => {
                    const feeling = modal.querySelector('input[name="crisis-feeling"]:checked')?.value;
                    const description = document.getElementById('crisis-description').value;

                    if (!feeling) {
                        alert('Por favor, selecione como você está se sentindo.');
                        return;
                    }

                    // Salvar informações da crise
                    const crisisData = {
                        feeling,
                        description,
                        timestamp: new Date().toISOString(),
                        userId: currentUser?.id || 'anonymous'
                    };

                    const crisisHistory = JSON.parse(localStorage.getItem('crisisHistory') || '[]');
                    crisisHistory.push(crisisData);
                    localStorage.setItem('crisisHistory', JSON.stringify(crisisHistory));

                    document.body.removeChild(modal);

                    // Mostrar mensagem de apoio
                    showSupportMessage();
                });
            }

            function showSupportMessage() {
                const modal = document.createElement('div');
                modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4';
                modal.innerHTML = `
                    <div class="bg-white rounded-lg shadow-xl max-w-md w-full p-6 text-center">
                        <div class="text-6xl mb-4">💙</div>
                        <h2 class="text-2xl font-bold text-blue-600 mb-4">Você não está sozinho(a)</h2>
                        <p class="text-gray-600 mb-6">Suas informações foram salvas. Lembre-se de que é normal ter momentos difíceis e está tudo bem pedir ajuda.</p>
                        
                        <div class="space-y-3 mb-6">
                            <div class="bg-blue-50 p-3 rounded-lg">
                                <p class="text-sm text-blue-800">💡 Tente respirar fundo 5 vezes</p>
                            </div>
                            <div class="bg-green-50 p-3 rounded-lg">
                                <p class="text-sm text-green-800">🤗 Procure um adulto de confiança</p>
                            </div>
                            <div class="bg-purple-50 p-3 rounded-lg">
                                <p class="text-sm text-purple-800">🎵 Ouça uma música que te acalma</p>
                            </div>
                        </div>
                        
                        <button id="close-support" class="btn-primary text-white font-bold py-2 px-6 rounded-lg">
                            Entendi
                        </button>
                    </div>
                `;

                document.body.appendChild(modal);

                document.getElementById('close-support').addEventListener('click', () => {
                    document.body.removeChild(modal);
                });

                // Falar mensagem de apoio
                speak('Você não está sozinho. Respire fundo e procure ajuda de um adulto de confiança.');
            }

            // Inicialização
            loadRoutine();
            loadStats();
            checkLoggedUser();
            updateAlphabetDisplay();
        });
    </script>
    <script>(function () { function c() { var b = a.contentDocument || a.contentWindow.document; if (b) { var d = b.createElement('script'); d.innerHTML = "window.__CF$cv$params={r:'98b8060b80fa70c6',t:'MTc1OTk1MTUyMC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);"; b.getElementsByTagName('head')[0].appendChild(d) } } if (document.body) { var a = document.createElement('iframe'); a.height = 1; a.width = 1; a.style.position = 'absolute'; a.style.top = 0; a.style.left = 0; a.style.border = 'none'; a.style.visibility = 'hidden'; document.body.appendChild(a); if ('loading' !== document.readyState) c(); else if (window.addEventListener) document.addEventListener('DOMContentLoaded', c); else { var e = document.onreadystatechange || function () { }; document.onreadystatechange = function (b) { e(b); 'loading' !== document.readyState && (document.onreadystatechange = e, c()) } } } })();</script>

    <script>
        function validateFormData(data) {
            if (!data.nome_crianca) throw new Error('Nome da criança é obrigatório.');
            if (!data.idade || data.idade < 3 || data.idade > 18)
                throw new Error('Idade deve ser entre 3 e 18 anos.');
            if (!data.data_nascimento) throw new Error('Data de nascimento é obrigatória.');
            if (!data.genero) throw new Error('Gênero é obrigatório.');
            if (!data.municipio) throw new Error('Município é obrigatório.');
            if (!data.estado) throw new Error('Estado é obrigatório.');
            if (!data.email_responsavel) throw new Error('Email do responsável é obrigatório.');
            if (!data.senha || data.senha.length < 6)
                throw new Error('Senha deve ter pelo menos 6 caracteres.');
        }

        const registerBtn = document.getElementById('register-btn');

        registerBtn.addEventListener('click', async (e) => {
            e.preventDefault();

            const formData = {
                nome_crianca: document.getElementById('register-name').value.trim(),
                idade: parseInt(document.getElementById('register-age').value),
                data_nascimento: document.getElementById('register-birthdate').value,
                genero: document.getElementById('register-gender').value,
                municipio: document.getElementById('register-city').value.trim(),
                estado: document.getElementById('register-state').value,
                email_responsavel: document.getElementById('register-email').value.trim(),
                senha: document.getElementById('register-password').value
            };

            try {
                validateFormData(formData);

                const response = await fetch('http://34.151.236.135:3000/api/usuarios/register', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(formData)
                });
                const data = await response.json();
                if (!response.ok) throw new Error(data.error || 'Erro no cadastro');
                
                const currentUser = data.usuario; 
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
                updateUserDisplay();
                alert('✅ Cadastro realizado com sucesso!');
            } catch (error) {
                alert(`⚠️ ${error.message}`);
                console.error("Erro no cadastro:", error);
            }
        });
    </script>
</body>

</html>